---
title: "Distribution of job listings across Australia"
author: "Peimin Lin"
biblio-style: authoryear-comp
linestretch: 1.5
output:
  pdf_document:
    highlight: tango
    number_sections: yes
    toc: yes
    toc_depth: 2
  html_document:
    df_print: paged
    toc: yes
    toc_depth: '2'
header-includes:
- \usepackage{titling}
- \pretitle{\begin{center} \includegraphics[width=5in,height=13in]{figs/front.jpg}\LARGE\\}
- \posttitle{\end{center}}
- \usepackage{fontawesome}
- \usepackage[most]{tcolorbox}
- \usepackage{xcolor}
- \usepackage{sectsty}
- \sectionfont{\color{olive}}
- \usepackage{verbatim}
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(echo = FALSE, 
                      cache=FALSE, 
                      messages=FALSE, 
                      warning=FALSE)
```

```{r library, echo=FALSE, messages=FALSE}
library(ggplot2)
library(tidyverse)
library(haven)
library(lubridate)
library(broom)
library(base)
library(glue)
library(bookdown)
library(tinytex)

```

\clearpage

# Introduction 

Job types, job locations, rising demand for certain job categories, these are just some of the aspects of job hunting that many working people around the world are intrigued by. In this report, you will find an in depth analysis into the distribution of job listings across Australia. The report will analyze 3 main sections of job distribution within Australia, broken down by:

1) The change in demand by job category
2) The change in demand for jobs by city
3) The change in demand by job type

Our motivation to choose this as our research topic is prompted by experiencing first hand the cataclysmic effects of the coronavirus and the impact it has had on the job market globally. It has been an unfortunate scenario to witness unemployment rates skyrocket in major cities around the world. Thus, we want to visualize the changes in demand to jobs of all types and categories in Australia, particularly in the major cities.

# Dataset and Methodology
- Source of data. (Dewi)  
- Limitations (Hanh - master)  
- Methodology: How we deal with this dataset. ( Peimin - master)  

# Analysis:
### Clean the data: 
1. isolate the month + year (Hanh - master branch)  
```{r load-data, cache = TRUE, results='hide'}
raw_data <- read.csv(here::here("data", "seek_australia_sample.csv"))
```

```{r clean-data, results='hide'}
# choose the needed columns only
data_cleaned <- raw_data %>%
  select(3:9)

# separate the post-date column to get the date out
data_cleaned <- data_cleaned %>%
  separate (post_date, into = c("post_date", "tz"), sep = "T")

# convert the post_date column from character to date format
data_cleaned %>%
  mutate_at(vars(post_date), as.Date, format = "%Y-%m-%d")
```

2. Missing values  (Hanh - Hanh-Ngo branch)  

### Analyze the change in demand by job category) (Peimin-Peimin branch)
```{r jobctegory}
# Select job category
jobcategory <- data_cleaned  %>% dplyr::select(post_date,
                                               category) %>%
  separate(post_date, c("Year","Month","day"))%>%
# and delete "year" and "day" in variable "post_day"
 select(-"Year", -"day") 

```

```{r category_num, fig.cap= " The number of jobs per category"}
library(kableExtra)
canum <- jobcategory %>%
  count(category,sort = TRUE, name = "number")%>%
  arrange(number) #arrange the number of category from small to large
kable(canum, caption = " The number of jobs per category  ") %>%	
kable_styling(bootstrap_options = c("striped", "hover"))
```



```{r monthly_dirtribution, fig.cap="Monthly job category distribution"}
distribution <- jobcategory  %>%
  count(Month,category,sort = TRUE, name = "number")%>%
  arrange(Month) %>%
   ggplot(aes(x = Month, y = number)) + 
   geom_col(position = "dodge") + 
  # wrap category into detail screen, each coloumn have five categories
   facet_wrap(~category, ncol = 5) +
  # job category title front size as 6.5
   theme_bw(base_size = 6.5)+
  # x aes front size angle set as 50
   theme(axis.text.x = element_text(angle = 50, vjust = 1)) + 
   ggtitle("Monthly job category distribution") 

distribution
```

```{r Month_number, fig.cap="Top 5 category in each month"}
monthly <- jobcategory  %>% 
  count(category,Month,sort = TRUE, name = "number") %>%
  arrange(Month) %>%
  group_by(Month) %>%
  top_n(5) %>% # select each months' top five job categories 
   ggplot() +
  geom_point(mapping = aes(x = Month, y = number, color = category)) + # fill category in difference color
  ggtitle("Top 5 category in each month")+
   theme_bw(base_size = 11.5)+
   theme(axis.text.x = element_text(angle = 50, vjust = 1)) 
   
monthly
```


There are 30 jobs category in this dataset and figure\@ref(fig: category_num)   list the number of jobs per category from April to November in 2018. The category of trades and services was the most popular jobs category in 2018 in Australia and information and communication technology was the second which almost the same as the first place. From labour market information portal known that those two categories has been in short supply in Australian labour market. For a better timely observation, figure\@ref(fig: monthly_dirtribution)   shows each jobs category requirement change in difference month which not only show the shortage job, but also show some category is becoming saturated. Meanwhile, figure\@ref(fig:  Month_numbercreates) a graph list top five jobs category in each month. There are 7 categories became the most frequently appeared in the list, for example accounting, administration and office support, healthcare and medical, hospitality and tourism, information and communication technology, Manufacturing, Transport and Logistics, Trade and Services. In October, there were more vacancy and labour requirement than other month. Forbes shown a statistics report that most industries would figure out what they need in September because holiday was coming and finish job before year-end. Thus, October became the most busiest month for recruiting.



### Analyze the change in demand by city + life quality  
1. Change in demand (Hanh)    
2. How does it reflect life quality? (Dewi)

### Analyze the change in demand by job type (Justinâ€™s branch)

# Conclusion: (Justin - master branch)




